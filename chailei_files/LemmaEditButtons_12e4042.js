webpackJsonp([11],{102:function(n,t,e){"use strict";function a(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function o(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),e.d(t,"default",function(){return d});var r=e(28),s=(e.n(r),e(0)),c=e(1),l=function(){function n(n,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}}(),d=function(n){function t(n){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n)),o=window.lemmaInfo;return e.state={showButtons:!1,allowComment:o.isAllowComment&&!(Object(s.j)()&&!o.commentNum),allowEdit:!o.islocked||o.isWhiteUser,isQQWX:Object(s.j)(),sounding:window.reactInstances.voiceInstance&&window.reactInstances.voiceInstance.sounding},e.goOpinion=e.goOpinion.bind(e),e.changeButtonState=e.changeButtonState.bind(e),e.gotoEditPage=e.gotoEditPage.bind(e),e.scrollToComment=e.scrollToComment.bind(e),e.cancel=e.cancel.bind(e),e}return o(t,n),l(t,[{key:"setSounding",value:function(n){this.setState({sounding:n})}},{key:"goOpinion",value:function(){var n="https://kf.sogou.com/feedback/nview/ce/edit?appKey=sg.app.baike&baseType=wap_content&lemmaTitle="+encodeURIComponent(Object(s.i)(window.lemmaInfo.lemmaTitle))+"&lemmaId="+window.lemmaInfo.lemmaId;window.stget&&stget("newwap.bc.dj"),Object(s.m)()?Object(s.s)({url:n,title:"报错"}):setTimeout(function(){window.location.href=n},300)}},{key:"changeButtonState",value:function(){var n=this.state.showButtons;this.showButtons||(window.stget&&stget("newwap.ugc.dj"),this.allowEdit&&window.stget&&stget("newwap.bj1.zx")),this.setState({showButtons:!n})}},{key:"gotoEditPage",value:function(){window.stget&&stget("newwap.bj1.dj"),c.c.checkAuditing()}},{key:"scrollToComment",value:function(){if(this.state.allowComment){var n="";$("#paragraph-datas li").each(function(){"科友·观点"===$(this).text()&&(n=$(this).attr("pid"))}),Object(c.j)(n,!0),window.stget&&stget("newwap.gd1.dj")}}},{key:"cancel",value:function(){window.stget&&stget("newwap.gb.dj")}},{key:"componentDidMount",value:function(){var n=this;$(document).on("click",function(t){$(t.target).closest(".edit-btn").length||n.setState({showButtons:!1})})}},{key:"render",value:function(){var n=this,t=n.state,e=t.showButtons,a=t.allowEdit,i=t.isQQWX,o=t.allowComment,r=t.sounding;return React.createElement(React.Fragment,null,React.createElement("a",{href:"javascript:;",className:"edit-btn "+(e?"":"show")+" "+(r?"sound-on":""),onClick:n.changeButtonState},"编辑"),React.createElement("div",{className:"edit-wrap "+(e?"show":"conceal")},!a||i||lemmaInfo.interimDel?null:React.createElement("a",{href:"javascript:;",className:"edit-btn-edit",onClick:n.gotoEditPage},"编辑"),a?null:React.createElement("a",{href:"javascript:;",className:"edit-btn-edit disabled"},"编辑"),i?null:React.createElement("a",{href:"javascript:;",className:"edit-btn-comment "+(o?"":"disabled"),onClick:n.scrollToComment},"观点"),React.createElement("a",{href:"javascript:;",className:"edit-btn-error",onClick:n.goOpinion},"报错"),React.createElement("a",{href:"javascript:;",className:"edit-btn-cancel",onClick:n.cancel},"取消")))}}]),t}(React.Component)},18:function(n,t,e){n.exports=e.p+"sprite_bk_e2b9224.png"},19:function(n,t,e){n.exports=e.p+"sprite_bk@2x_d2c376e.png"},28:function(n,t,e){var a=e(29);"string"==typeof a&&(a=[[n.i,a,""]]);var i={};i.transform=void 0;e(4)(a,i);a.locals&&(n.exports=a.locals)},29:function(n,t,e){t=n.exports=e(3)(void 0),t.push([n.i,".edit-btn:before, .edit-btn-edit.disabled:before,\n.edit-btn-comment.disabled:before,\n.edit-btn-error.disabled:before, .edit-btn-cancel:before {\n  background-image: url("+e(18)+");\n  background-image: -webkit-image-set(url("+e(18)+") 1x, url("+e(19)+") 2x);\n  background-size: 150px 130px;\n}\n\n.edit-btn {\n  opacity: 0;\n  z-index: 4;\n  position: fixed;\n  right: 26.5px;\n  bottom: 21.5px;\n  width: 36px;\n  height: 36px;\n  border-radius: 36px;\n  background: rgba(255, 255, 255, 0.98);\n  -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.35);\n          box-shadow: 0 0 5px rgba(0, 0, 0, 0.35);\n  overflow: hidden;\n  pointer-events: none;\n  -webkit-transition: all 0.2s;\n  transition: all 0.2s;\n}\n\n.edit-btn:before {\n  content: '';\n  display: block;\n  margin: 9px;\n  background-position: -56px -86px;\n  width: 18px;\n  height: 17px;\n}\n\n.edit-btn.show {\n  opacity: 1;\n  pointer-events: auto;\n  -webkit-transition: all 0.2s;\n  transition: all 0.2s;\n}\n\n.edit-btn.sound-on {\n  bottom: 75px;\n}\n\n.edit-btn.sound-on + .edit-wrap {\n  bottom: 75px;\n}\n\n@-webkit-keyframes editBtnAni1 {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(164px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(164px) scale3d(0.7, 0.7, 0.7);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n}\n\n@keyframes editBtnAni1 {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(164px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(164px) scale3d(0.7, 0.7, 0.7);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n}\n\n@-webkit-keyframes editBtnAni2 {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(108px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(108px) scale3d(0.7, 0.7, 0.7);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n}\n\n@keyframes editBtnAni2 {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(108px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(108px) scale3d(0.7, 0.7, 0.7);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n}\n\n@-webkit-keyframes editBtnAni3 {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(50px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(50px) scale3d(0.7, 0.7, 0.7);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n}\n\n@keyframes editBtnAni3 {\n  0% {\n    opacity: 0;\n    -webkit-transform: translateY(50px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(50px) scale3d(0.7, 0.7, 0.7);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n}\n\n@-webkit-keyframes editBtnAni4 {\n  0% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(164px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(164px) scale3d(0.7, 0.7, 0.7);\n  }\n}\n\n@keyframes editBtnAni4 {\n  0% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(164px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(164px) scale3d(0.7, 0.7, 0.7);\n  }\n}\n\n@-webkit-keyframes editBtnAni5 {\n  0% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(108px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(108px) scale3d(0.7, 0.7, 0.7);\n  }\n}\n\n@keyframes editBtnAni5 {\n  0% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(108px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(108px) scale3d(0.7, 0.7, 0.7);\n  }\n}\n\n@-webkit-keyframes editBtnAni6 {\n  0% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(50px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(50px) scale3d(0.7, 0.7, 0.7);\n  }\n}\n\n@keyframes editBtnAni6 {\n  0% {\n    opacity: 1;\n    -webkit-transform: translateY(0) scaleX(1);\n            transform: translateY(0) scaleX(1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform: translateY(50px) scale3d(0.7, 0.7, 0.7);\n            transform: translateY(50px) scale3d(0.7, 0.7, 0.7);\n  }\n}\n\n.edit-wrap {\n  opacity: 0;\n  z-index: 4;\n  position: fixed;\n  right: 28.5px;\n  bottom: 23.5px;\n  pointer-events: none;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n\n.edit-wrap.show {\n  opacity: 1;\n  pointer-events: auto;\n}\n\n.edit-wrap.show .edit-btn-edit {\n  -webkit-animation: editBtnAni1 0.2s forwards;\n          animation: editBtnAni1 0.2s forwards;\n}\n\n.edit-wrap.show .edit-btn-comment {\n  -webkit-animation: editBtnAni2 0.2s forwards;\n          animation: editBtnAni2 0.2s forwards;\n}\n\n.edit-wrap.show .edit-btn-error {\n  -webkit-animation: editBtnAni3 0.2s forwards;\n          animation: editBtnAni3 0.2s forwards;\n}\n\n.edit-wrap.conceal {\n  opacity: 0;\n  pointer-events: none;\n}\n\n.edit-wrap.conceal .edit-btn-edit {\n  -webkit-animation: editBtnAni4 0.2s forwards;\n          animation: editBtnAni4 0.2s forwards;\n}\n\n.edit-wrap.conceal .edit-btn-comment {\n  -webkit-animation: editBtnAni5 0.2s forwards;\n          animation: editBtnAni5 0.2s forwards;\n}\n\n.edit-wrap.conceal .edit-btn-error {\n  -webkit-animation: editBtnAni6 0.2s forwards;\n          animation: editBtnAni6 0.2s forwards;\n}\n\n.edit-btn-edit,\n.edit-btn-comment,\n.edit-btn-error {\n  position: relative;\n  display: block;\n  width: 44px;\n  height: 44px;\n  border-radius: 44px;\n  line-height: 44px;\n  text-align: center;\n  font-size: 12px;\n  font-weight: bold;\n  color: #fff;\n  background: rgba(36, 40, 53, 0.8);\n  -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.35);\n          box-shadow: 0 0 5px rgba(0, 0, 0, 0.35);\n  margin: 12px -6px;\n}\n\n.edit-btn-edit.disabled,\n.edit-btn-comment.disabled,\n.edit-btn-error.disabled {\n  color: #999;\n}\n\n.edit-btn-edit.disabled:before,\n.edit-btn-comment.disabled:before,\n.edit-btn-error.disabled:before {\n  content: '';\n  position: absolute;\n  top: 1px;\n  right: 1px;\n  background-position: -82px -86px;\n  width: 16px;\n  height: 16px;\n}\n\n.edit-btn-cancel {\n  display: block;\n  width: 32px;\n  height: 32px;\n  border-radius: 32px;\n  background: rgba(255, 255, 255, 0.98);\n  -webkit-box-shadow: 0 0 5px rgba(0, 0, 0, 0.35);\n          box-shadow: 0 0 5px rgba(0, 0, 0, 0.35);\n  overflow: hidden;\n  margin-top: 14px;\n}\n\n.edit-btn-cancel:before {\n  content: '';\n  display: block;\n  margin: 11px;\n  background-position: -140px 0px;\n  width: 10px;\n  height: 10px;\n}\n",""])}});
//# sourceMappingURL=LemmaEditButtons_12e4042.js.map