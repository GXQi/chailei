webpackJsonp([63],{159:function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"default",function(){return u});var l=a(0),r=a(1),c=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=null,u=function(t){function e(){n(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),a=[];return $("#paragraph-datas").find("li").each(function(){var t=$(this).attr("ptitle"),e=$(this).attr("pid"),n=$(this).attr("plevel"),o=1==n?"":"sub";t.indexOf("科友")>-1&&Object(l.j)()&&!window.lemmaInfo.commentNum||a.push({pid:e,title:t,className:o})}),t.state={contentPara:a},t}return i(e,t),c(e,[{key:"showNav",value:function(){$("body").addClass("no-scroll"),$(".catalog-wrap").show(),$(".catalog-list").addClass("show")}},{key:"hideNav",value:function(){$("body").removeClass("no-scroll"),$(".catalog-list").removeClass("show"),$(".catalog-wrap").hide(),l.u.closeLayer(),window.globalState.isScroll=!0}},{key:"isRelativeToViewport",value:function(){if(null!=s)return s;var t=window.pageXOffset?window.pageXOffset+window.innerWidth-1:0,e=window.pageYOffset?window.pageYOffset+window.innerHeight-1:0;return 0===t&&0===e||(s=!document.elementFromPoint(t,e))}},{key:"elementFromPoint",value:function(t,e){return this.isRelativeToViewport()||(t+=window.pageXOffset,e+=window.pageYOffset),document.elementFromPoint(t,e)}},{key:"isVisualRange",value:function(t){var e=this.getOffsetTop(t);return e>=0&&e<window.innerHeight-40}},{key:"getOffsetTop",value:function(t){var e=0;try{e=$(t).offset().top-$("#catalogueMenu ul").offset().top}catch(t){}return e}},{key:"getParaIdAtPoint",value:function(){var t=$(this.elementFromPoint(0,$("#commonHeader").height()+20)).eq(0),e=t.attr("data-nav-para");return e||(t.closest(".j-nav-para-item").length?t.closest(".j-nav-para-item").attr("data-nav-para"):"no-nav-para")}},{key:"highLightTitle",value:function(){var t=this.getParaIdAtPoint();"no-nav-para"!=t&&($(".catalog-list li").removeClass("cur"),$('.catalog-list li[data-para="'+t+'"]').addClass("cur"))}},{key:"navFollow",value:function(){var t=$(".catalog-list li.cur"),e=$("#catalogueMenu ul").scrollTop();if(!this.isVisualRange(t)){var a=this.getOffsetTop(t);$("#catalogueMenu ul").scrollTop(a+e)}}},{key:"stat",value:function(t,e){"sub"==t?window.stget&&stget("newwap.youmulu.ej"):!t&&$(e.currentTarget).attr("data-para")&&window.stget&&stget("newwap.youmulu.yj")}},{key:"componentDidMount",value:function(){var t=this;$(".btn-catalog").on("click",function(){$(".catalog-list").css("height",window.innerHeight),t.highLightTitle(),t.showNav(),t.navFollow(),$("html").css("touch-action","none"),window.globalState.isScroll=!1,l.u.openLayer(),window.stget&&stget("newwap.youmulu.dj")}),$(".catalog-close").on("touchstart touchend",function(e){e.preventDefault(),t.hideNav(),$("html").css("touch-action",!1)}),$(".catalog-list li").on("click",function(){$("html").css("touch-action",!1),$(".catalog-list li").removeClass("cur"),$(this).addClass("cur"),t.hideNav(),Object(r.j)($(this).attr("data-para"),!0)}),$(window).resize(function(){$("#catalogueMenu .catalog-list").css("height",window.innerHeight)})}},{key:"render",value:function(){var t=this,e=t.state.contentPara;return React.createElement(React.Fragment,null,React.createElement("a",{href:"javascript:;",className:"btn-catalog"},"目录"),React.createElement("div",{id:"catalogueMenu",className:"catalog-wrap catalog-wrap-scroll",style:{display:"none"}},React.createElement("a",{href:"javascript:;",className:"catalog-close"}),React.createElement("div",{className:"catalog-list"},React.createElement("ul",null,e.map(function(e,a){return"摘要"==e.title?React.createElement("li",{key:a,"data-para":"top",className:"cur",onClick:t.stat},"摘要"):React.createElement("li",{key:a,"data-para":e.pid,className:e.className,onClick:t.stat.bind(t,e.className)},e.title)})))))}}]),e}(React.Component)}});
//# sourceMappingURL=LemmaCategoryNav_1ce227a.js.map