(function(){var _w=window,_d=document,_l=_w.location;var gName="__shequstat";var idatajq=window.jQuery||window.Zepto;var dr_svr=_l.protocol+"//luedong."+(_l.hostname.indexOf('.sogou.com')>-1?'sogou':'sogo')+".com/dr/p1.gif";var pr_svr=_l.protocol+"//luedong."+(_l.hostname.indexOf('.sogou.com')>-1?'sogou':'sogo')+".com/pr/pingd";var stat={server:dr_svr,errServer:pr_svr+"?srctype=exception",cookiePrefix:"sqstat_",imgArr:[],cookie:"",query:"",hostname:_l.hostname,referrer:_d.referrer,domain:"",cookieInfo:{},queryInfo:{},divHandlers:[],data:{},gatherTypes:{"ss_c":"div"},groupTypes:{"ch":"ch","pid":"pid"},persistentTypes:{"pid":{"entr":"ss_pidf"},"cid":{"entr":"ss_cidf"}},cookieParam:["ssuid","pid","cid","ss_pidf","ss_cidf","p_uin"],kvSplit:function(str,outerSep,innerSep){if(typeof str!="string"||str===""){return{}}outerSep=outerSep||"&";innerSep=innerSep||"=";var rObj={};var outerArr=str.split(outerSep);for(var i=0;i<outerArr.length;++i){if(outerArr[i].length==0){continue}var item=outerArr[i];var sepPos=item.indexOf(innerSep);if(sepPos<0){continue}var key=item.substring(0,sepPos);var val=item.substring(sepPos+innerSep.length);rObj[key]=val}return rObj},getDomain:function(hostname){if(hostname===undefined&&this.domain){return this.domain}if(hostname===undefined){hostname=this.hostname}var tArr=hostname.split(".");if(tArr[tArr.length-1].match(/^\d+$/)){domain=hostname}else{domain=tArr.slice(-2).join(".")}if(hostname===this.hostname){this.domain=domain}return domain},getCookie:function(name){if(_d.cookie!==this.cookie){this.cookie=_d.cookie;this.cookieInfo=this.kvSplit(_d.cookie,"; ")}return(this.cookieInfo[name])?decodeURIComponent(this.cookieInfo[name]):this.cookieInfo[name]},getQuery:function(key){if(_l.search!==this.query){this.query=_l.search;this.queryInfo=this.kvSplit(_l.search.substring(1))}return this.queryInfo[key]},setCookie:function(name,value,max_age,path,domain){path=path||"/";domain=domain||this.getDomain();var getExpires=function(max_age){var date=new Date();if(max_age=="unlimited"){date.setFullYear(2038,0,1)}else{if(typeof max_age=="number"){if(max_age<=0){date.setFullYear(1970,1,1)}else{date.setTime(date.getTime()+max_age*1000)}}}return date.toGMTString()};var item=name+"="+encodeURIComponent(value)+(max_age||max_age===0?("; expires="+getExpires(max_age)):"")+(path?";path="+path:"")+(domain?";domain="+domain:"");_d.cookie=item},delCookie:function(name,path,domain){this.setCookie(name,"",0,path,domain)},loopDivs:function(){var divSet=_d.getElementsByTagName("div");for(var i=0;i<divSet.length;++i){for(var j=0;j<this.divHandlers.length;++j){this.divHandlers[j](divSet[i])}}},regDivHandler:function(func){this.divHandlers.push(func)},regDivHandlers:function(){for(var type in this.gatherTypes){this.regDivHandler(this.getGatherFunc(type))}for(var type in this.groupTypes){this.regDivHandler(this.getGroupFunc(type))}},getGatherFunc:function(type,sep){var sep=sep||"^";var data=this.data;return function(div){var attrVal=div.getAttribute(type);if(attrVal){data[type]=data[type]===undefined?"":data[type];data[type]+=(data[type]===""?"":sep)+attrVal}}},getGroupFunc:function(type,domain){var domain=domain||this.getDomain();var stat=this;return function(div){var attrVal=div.getAttribute(type);if(!attrVal){return}var strToAdd=type+"="+attrVal;var urls=div.getElementsByTagName("a");var pattern=new RegExp("[&?]"+type+"=");for(var i=0;i<urls.length;++i){url=urls[i];if(stat.getDomain(url.hostname)==domain){if(pattern.test(url.search)){continue}url.href=" "+url.href+(url.search?"&":"?")+strToAdd}}}},genSsuid:function(){var c=new Date().getUTCMilliseconds();return(Math.round(Math.random()*2147483647)*c)%10000000000},submit:function(obj,server){server=server||this.server;var queryString="";if(obj["ref"]!==undefined){queryString="ref="+obj["ref"];delete(obj["ref"])}for(var k in obj){queryString+=(queryString?"&":"")+k+"="+obj[k]}queryString+=(queryString?"&":"")+"rand="+Math.random();var src=server+"?"+queryString;var c=new Image();var len=this.imgArr.push(c);var imgArr=this.imgArr;c.onload=(c.onerror=function(){imgArr[len-1]=null});c.src=src;c=null},setPersistentParams:function(){for(var type in this.persistentTypes){var props=this.persistentTypes[type];var flagName=props["entr"]||(this.cookiePrefix+type+"_f");var valInQuery=this.getQuery(type);if(valInQuery){if(valInQuery==this.getCookie(type)){this.setCookie(flagName,"1")}else{this.delCookie(flagName);this.setCookie(type,valInQuery)}}else{if(this.getCookie(type)){this.setCookie(flagName,"1")}}}},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile Safari/i.test(navigator.userAgent)},getSc:function(){var sc="unknown";var domainname=_l.hostname.toLowerCase();if(domainname.indexOf('wenwen')>-1){sc=this.isMobile()?"wapask":"ask"}else if(domainname.indexOf('baike')>-1){sc=this.isMobile()?"wapbaike":"baike"}else if(domainname.indexOf('zhinan')>-1){sc=this.isMobile()?"wapzhinan":"zhinan"}else if(domainname.indexOf('ld.sogo')>-1||domainname.indexOf('luedong')>-1||domainname.indexOf('ldapi')>-1){sc=this.isMobile()?"wapld":"ld"}else if(domainname.indexOf('zhuanjia')>-1){if(_l.pathname.indexOf('/mei')>-1){sc=this.isMobile()?"wapyimei":"yimei"}else{sc=this.isMobile()?"wapzhuanjia":"zhuanjia"}}else if(domainname.indexOf('lvshi')>-1){sc=this.isMobile()?"waplvshi":"lvshi"}else if(domainname.indexOf('wenda')>-1){sc=this.isMobile()?"wapwenda":"wenda"}else if(domainname.indexOf('ldvideo')>-1){sc=this.isMobile()?"wapldvideo":"ldvideo"}else if(domainname.indexOf('taowen')>-1){sc=this.isMobile()?"waptaowen":"taowen"}else if(domainname.indexOf('wenzhen')>-1){sc=this.isMobile()?"wapwenzhen":"wenzhen"}return sc},run:function(data){if(typeof(data)!="object"){data={}}this.setPersistentParams();this.regDivHandlers();this.loopDivs();if(!this.getCookie("ssuid")){this.setCookie("ssuid",this.genSsuid(),"unlimited")}data["ver"]=5;data["ref"]=encodeURIComponent(this.referrer);data["sc"]=this.getSc();if(navigator&&navigator.connection){if(/iphone|ipad|android/.test(navigator.userAgent.toLowerCase())){data["network"]=navigator.connection.type?navigator.connection.type:'unknown'}}for(var type in this.gatherTypes){var name=this.gatherTypes[type];if(this.data[type]){data[name]=this.data[type]}}for(var i=0;i<this.cookieParam.length;i++){var k=this.cookieParam[i];data[k]=this.getCookie(k)}data["screen"]=window.screen.width+'_'+window.screen.height;data["dpr"]=window.devicePixelRatio||1;this.submit(data)},checkSsuid:function(){if(!this.getCookie("ssuid")){this.setCookie("ssuid",this.genSsuid(),"unlimited")}},isReportScreen:function(){var sc=this.getSc();var pathname=_l.pathname;if(sc==="zhuanjia"||sc==="wapzhuanjia"||sc==="yimei"||sc==="wapyimei"){return/\/detail\/[\S]+\.html/i.test(pathname)||/^\/lvshi\/*$/i.test(pathname)||/^\/yisheng\/*$/i.test(pathname)||/^\/mei\/*/i.test(pathname)}else if(sc==="baike"||sc==="wapbaike"){return/^\/v\d+\.htm/i.test(pathname)||/lemmaInfo\/*$/i.test(pathname)||/fullLemma\/*$/i.test(pathname)}else if(sc==="ask"||sc==="wapask"){return/\/z\/q(\d+)\.htm/i.test(pathname)||/^\/question\/*$/i.test(pathname)||/\/cate\/home/i.test(pathname)||pathname=='/'}else if(sc==="zhinan"||sc==="wapzhinan"){return/^\/(guide)?\/*/i.test(pathname)||/^\/guide\/detail\/*/i.test(pathname)||/^\/guide\/cate\/*/i.test(pathname)}else if(sc==="ld"||sc==="wapld"){return/^\/(m)?\/*$/.test(pathname)||/^(\/m)?\/catesquare\/*$/i.test(pathname)||/^(\/m)?\/cate\/*$/i.test(pathname)||/^(\/m)?\/question\/*/i.test(pathname)||/^(\/m)?\/article\/*/i.test(pathname)}else if(sc==="wenda"||sc==="wapwenda"){return/\/k\/c(\d+)\.htm/.test(pathname)}else if(sc==="lvshi"||sc==="waplvshi"){return/^\/$/.test(pathname)||/^\/lawyer\/list\.html/.test(pathname)||/^\/import-question\/list\.html$/.test(pathname)||/^\/regulations\/list\.html$/.test(pathname)||/^\/import-question\/detail\/\w+\.html$/.test(pathname)||/^\/article\/detail\/\w+\.html$/.test(pathname)||/^\/audio\/detail\/\w+\.html$/.test(pathname)||/^\/video\/detail\/\w+\.html$/.test(pathname)}else{return false}},reportScSt:function(screens,stayTime){if(screens&&stayTime){this.checkSsuid();var sc=this.getSc();var data={"srctype":"getscreens","lurl":escape(_l),"sc":sc,"screens":screens,"staytime":stayTime,"ssuid":this.getCookie("ssuid"),"orig":this.isMobile()?254:253};this.submit(data,pr_svr)}},throttleSc:function(fn,threshhold,scope){threshhold||(threshhold=300);var last,deferTimer;return function(){var context=scope||this;var now=+new Date,args=arguments;if(last&&now<last+threshhold){clearTimeout(deferTimer);deferTimer=setTimeout(function(){last=now;fn.apply(context,args)},threshhold)}else{last=now;fn.apply(context,args)}}},screenAndStaytime:function(){var screens=1,enterTime=new Date().getTime();idatajq(window).on('scroll',stat.throttleSc(function(){screens=Math.max(Math.ceil(idatajq(window).scrollTop()/idatajq(window).height())+1,screens)},300));idatajq(window).on('unload',function(){var stayTime=new Date().getTime()-enterTime;stat.reportScSt(screens,stayTime)})},stget:function(ch,sc,ourl,qid,sort){stat.checkSsuid();sc=stat.getSc();var data={"srctype":"getsret","lurl":escape(_l),"ch":ch,"sc":sc,"ssuid":stat.getCookie("ssuid"),"orig":stat.isMobile()?254:253};stat.submit(data,pr_svr)},apget:function(ap,para,sc){stat.checkSsuid();sc=stat.getSc();var para=para||"";var data={"srctype":"getap","lurl":escape(_l),"ap":ap,"para":escape(para),"sc":sc,"ssuid":stat.getCookie("ssuid"),"orig":stat.isMobile()?254:253};stat.submit(data,pr_svr)},videoget:function(type,pageid,videoid){stat.checkSsuid();sc=stat.getSc();var type=type||"";var pageid=pageid||0;var videoid=videoid||0;var data={"srctype":"getvideo","lurl":escape(_l),"type":type,"pageid":pageid,"videoid":videoid,"sc":sc,"ssuid":stat.getCookie("ssuid"),"orig":stat.isMobile()?254:253};stat.submit(data,pr_svr)}};window[gName]=stat;window["stget"]=stat.stget;window["apget"]=stat.apget;window["videoget"]=stat.videoget;stat.run();if(idatajq){try{stat.isReportScreen()&&stat.screenAndStaytime()}catch(e){}}if(window.lemmaInfo){if(window.lemmaInfo.isNewLemmaCountFlag||window.lemmaInfo.thumbnailUrl){stat.stget('newbaikelemma')}}})();