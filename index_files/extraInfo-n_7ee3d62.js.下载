define("wiki-m-lemma:widget/component-n/extraInfo/extraInfo-n",["require","exports","module","wiki-m-common:widget/lib/zepto/zepto","wiki-m-common:widget/util/nslog","wiki-m-common:widget/lib/iscroll/iscroll.min","wiki-m-common:widget/component/sf/sf","ralltiir"],function(t,o){var n=t("wiki-m-common:widget/lib/zepto/zepto"),e=t("wiki-m-common:widget/util/nslog"),i=t("wiki-m-common:widget/lib/iscroll/iscroll.min"),a=t("wiki-m-common:widget/component/sf/sf"),s=t("ralltiir");o.init=function(t){function o(){var o=w.children().height()+1,e=n("#extra_polysemant_content_title").height();u=Math.floor((window.screen.height-188-e)/o),h=o*u+e,t.navigationCount>u?(d.height(h),v=w.height(),new i("#extra_polysemant_content_ul_el",{scrollX:!1,scrollY:!0,preventDefault:!0,bounce:!1})):r.on("touchmove",function(t){t.preventDefault()})}function l(t){t||(p.removeClass(g),r.removeClass(_),r.css("opacity",0),r.hide()),p.css("bottom","-"+h+"px"),t&&setTimeout(function(){r.css("opacity",0),setTimeout(function(){r.hide()},y)},0),e.q2("20017003")}var t=t||{};if(t.inLemmaTabsFlow){var m=!1,c=n("#extra_polysemant_tabs_trigger"),r=n("#extra_polysemant_tabs_el"),p=n("#extra_polysemant_content"),f=n("#extra_polysemant_content_closer"),d=n("#extra_polysemant_content_ul_el"),w=n("#extra_polysemant_content_ul"),u=0,h=0,_="extra-polysemant-transition-fast",g="extra-polysemant-transition-slow",y=200,v=0,x=new a;w.on("tap","li",function(){var t=n(this).attr("data-sf-href");t&&(e.q2("20017001"),s.action.redirect(x.inWise?x.wiseBasePath+t:t))});var J=n("#extra_polysemant_content_placeholder");J.on("touchmove",function(t){t.preventDefault()}),J.on("click",function(t){l(!0),t.stopPropagation()}),J.on("tap",function(t){t.stopPropagation()}),c.on("click",function(t){r.addClass(_),r.show(),m||o(),p.css("bottom","-"+h+"px"),setTimeout(function(){p.addClass(g).css("bottom",0)},0),m=!0,t.stopPropagation(),e.q2("20017000")}),f.on("click",function(t){l(!0),t.stopPropagation(),e.q2("20017002")}),w.on("tap",function(t){l(),t.stopPropagation()})}else{n("#J-polysemant-content").length>0&&e.qAll("20001207");var k=!1;n("#J-more-means").tap(function(t){k?(n("#J-polysemant-content").hide(),n("#J-more-means-icon").removeClass("on"),n("#J-polysemant").removeClass("on"),k=!1,e.qAll("20001212")):(n("#J-polysemant-content").width(n(window).width()).show(),n("#J-more-means-icon").addClass("on"),n("#J-polysemant").addClass("on"),k=!0,e.qAll("20001208")),t.preventDefault()}),n("#J-fold").tap(function(t){e.qAll("20001213"),n("#J-polysemant-content").hide(),n("#J-more-means-icon").removeClass("on"),n("#J-polysemant").removeClass("on"),k=!1;var o=n("#J-polysemant").offset().top-40;n(window).scrollTop()>o&&window.scrollTo(0,o),t.preventDefault()}),n(".J-subLemma-item").click(function(){e.qAll("20001209"),page.inSf?n(this).attr("data-sf-href",n(this).attr("data-sf-href")+"?timestamp="+(new Date).getTime()):window.location.href=n(this).data("href")}),window.location.href.indexOf("showopts=1")>-1&&(n("#J-polysemant-content").show(),n("#J-more-means-icon").addClass("on"),n("#J-polysemant").addClass("on"),k=!0)}}});