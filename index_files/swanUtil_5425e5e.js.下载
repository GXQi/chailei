define("wiki-m-common:widget/component/swan/swanUtil",["require","exports","module","wiki-m-common:widget/lib/zepto/zepto","wiki-m-common:widget/component/swan/swan.min","wiki-m-common:widget/util/cookie"],function(e,t){function o(e){return e.replace(new RegExp("[一-龥]|·","g"),function(e){return encodeURIComponent(e)})}function n(e){return e.replace(new RegExp("[&]","g"),function(e){return encodeURIComponent(e)})}function i(e,t){var i=t.match(/(.*?\.cn|.*?\.us|.*?\.ru|.*?\.org|.*?\.gov|.*?\.edu|.*?\.name|.*?\.biz|.*?\.cc|.*?\.tv|.*?\.net|.*?\.com)?(.*)/),a=i[1],r=i[2].split("?");a?-1===a.indexOf("http")&&(a=location.protocol+"//"+a.replace(/\/\//,"")):a=location.protocol+"//"+location.host;var c=e+"?urlHost="+a;return 2===r.length?(c+="&urlPath="+n(o(r[0])),c+="&"+o(r[1])):r[0]&&(c+="&urlPath="+n(o(r[0]))),c}function a(){var e=navigator.userAgent.toLowerCase(),t=p.read("inSmartprogram");return new RegExp("baiduboxapp").test(e)&&new RegExp("swan").test(e)||!!t}function r(e){var t="/pages/white/white",o=[{src:"/pic/.*albumId=",path:"/pages/white/white"},{src:"/pic/|/imageview/|/wikisecond/videoflow|/wikisecond/topic",path:"/pages/dark/dark"},{src:"/starrank/weekfans|/starflower/starrank|/starrank/weekinfluence",path:"/pages/dark/dark"},{src:"usercenter",page:"/pages/blue/blue"}];return c.each(o,function(o,n){var i=new RegExp(n.src,"i");return i.test(e)?(t=n.path,!1):void 0}),t}var c=e("wiki-m-common:widget/lib/zepto/zepto"),s=e("wiki-m-common:widget/component/swan/swan.min"),p=e("wiki-m-common:widget/util/cookie");t.buildPageUrl=i,t.getPagePath=r,t.inSmartprogram=a(),t.setNavigationBarTitle=s.setNavigationBarTitle,t.setNavigationBarColor=s.setNavigationBarColor,t.navigateTo=function(e,t){var t=t;t||(t=e,e=r(e));var o=i(e||"/pages/white/white",t);if(new RegExp("urlPath=/museum.*").test(o)){var n=t;new RegExp(location.host).test(t)||(n=location.protocol+"//"+location.host+t),s.openAdWebPage({url:n})}else new RegExp("urlHost=.*?(baike.otp.baidu.com|baike.baidu.com)&.+").test(o)?s.webView.navigateTo({url:o}):s.openAdWebPage({url:t})}});