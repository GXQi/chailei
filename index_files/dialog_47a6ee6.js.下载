define("wiki-m-lemma:widget/tools/dialog/dialog",["require","exports","module","wiki-m-common:widget/lib/zepto/zepto","wiki-m-common:widget/lib/jsmart/jsmart","wiki-m-lemma:widget/tools/bodyScrollLock/bodyScrollLock.es","wiki-m-common:widget/component/sf/sf"],function(t,i,n){var o=t("wiki-m-common:widget/lib/zepto/zepto"),e=t("wiki-m-common:widget/lib/jsmart/jsmart"),s=new e('<div class="bk-common-dialog {%$uuidClass|f_escape_xml%} ">\n<div class="bk-common-dialog__mask">\n</div>\n<div class="bk-common-dialog__content">\n{%if $title%}<div class="bk-common-dialog__content__title">{%$title|f_escape_xml%}</div>\n{%/if%}\n{%if $content%}<div class="bk-common-dialog__content__content">{%$content|f_escape_xml%}</div>\n{%/if%}\n{%if $btnlist%}\n<div class="bk-common-dialog__content__footer">\n{%foreach $btnlist as $i => $item%}\n<span class="{%if !$item.cls%}bk-common-dialog__content__footer__btn{%/if%} \n                        {%if $item.cls%}{%$item.cls%}{%/if%} J-btn" data-index="{%$i|f_escape_xml%}">\n{%$item.text|f_escape_xml%}\n</span>\n{%/foreach%}\n</div>\n{%/if%}\n</div>\n</div>'),a=t("wiki-m-lemma:widget/tools/bodyScrollLock/bodyScrollLock.es"),c=t("wiki-m-common:widget/component/sf/sf"),l=function(){function t(t,i,n){var e=new c;this._jsClassNamePre="J-bk-common-dialog-",this._jsClassName=this._jsClassNamePre+(new Date).valueOf(),this._btnlist=n;var a=s.fetch({uuidClass:this._jsClassName,title:t,content:i,btnlist:this._btnlist});this.$dialogContainer=o("body"),e.inSf&&(this.$dialogContainer=e.$view.children(".rt-body")),this.$dialogContainer.append(a),this._$container=o("."+this._jsClassName),this._$btn=this._$container.find(".J-btn"),this._$content=this._$container.find(".bk-common-dialog__content"),this._$mask=this._$container.find(".bk-common-dialog__mask"),this._bindEvent()}return t.prototype._bindEvent=function(){var t=this;this._$btn.click(function(){t._btnlist[o(this).data().index].callback(t)}),this._$mask.bind("touchstart",function(i){t.close(),i.preventDefault(),i.stopPropagation()})},t.prototype._unbindEvent=function(){this._$btn.off("touchstart"),this._$mask.off("touchstart")},t.prototype.show=function(){this._$container.show(),a.disableBodyScroll(this._$container)},t.prototype.close=function(){a.enableBodyScroll(this._$container),this._unbindEvent(),this._$container.hide(),this._$container.remove()},t}();n.exports=l});